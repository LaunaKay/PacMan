<!-- The purpose is basically to tell the browser that we are using the latest accepted HTML conventions. Should be the first line in every HTML document -->
<!doctype html>
<!-- everything between <html> tag will be HTML markup language -->
<html>
<!-- <head> will contain meta-data/properties about the document -->
<head>
  <!-- shown as text on browser tab & when user bookmarks page -->
  <title>Pacman Game</title>
  <!-- css stylesheet is used for the look & formatting -->
  <!-- usually link to external stylesheet but can do here or inline -->
  <style type="text/css">
    #container{
      background-color: black;
      width: 320px;
      height: 240px;
      position: relative;
    }
/* 0 */
    .brick{ 
      background-color: blue;
      width: 16px;
      height: 16px;
      position: absolute;
      /*display: inline-block;*/
    }
/* 1 */
    .coin{
      background-image: url('yellowdot_large.gif');
      background-size: cover;
      width: 8px;
      height: 8px;
      position: absolute;
      /*display: inline-block;*/
    }

    .pacman{
      background-image: url('pacman.gif');
      background-size: cover;
      width: 16px;
      height: 16px;
      position: absolute;
      /*display: inline-block;*/
    }
/* 2 */
    .blank{
      width: 16px;
      height: 16px;
      position: absolute;
      /*display: inline-block;*/
    }

    .score{
      width: 32px;
      height: 16px;
      background-color: white;
      color: red;
      background-size: cover;
    }

  </style>

  <audio id = "pacman_chomp" src="audio/pacman_chomp.wav" preload="auto"></audio>
  <a href = "javascript:play_single_sound();">
</head>

<!-- <body> has everything that will be rendered/visible when page loads in browser -->
<body>

}
  <!-- for additional sectioning needs we can use a division <div> tag -->
  <!-- id vs. class (each id must be unique vs. many with the same class name) -->
  <div id='container'>
    <div id='world'></div>
    <div id='score' class="score"> original starting score </div>
  </div>

  <script type="text/javascript">
    // create an object to store the propeties of the character
    
    var pacman = {
      x: 5,
      y: 5,
    }
    // create an array to hold the 'world' or gameboard that we will use to represent what each box in the grid will be
    var world = [
      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
      0,1,1,2,2,0,1,1,1,0,1,2,2,2,0,0,1,1,1,0,
      0,1,1,1,1,1,1,1,1,0,1,1,1,2,2,2,2,2,1,0,
      0,1,1,1,1,1,1,1,1,0,1,2,2,2,0,0,1,1,1,0,
      0,1,1,1,1,1,1,1,1,0,1,1,1,2,2,2,2,2,1,0,
      0,1,1,1,2,1,1,1,1,0,0,1,1,1,0,2,2,0,1,0,
      0,1,0,1,1,1,2,2,2,0,0,1,1,1,0,2,2,1,0,0,
      0,1,0,1,1,1,1,1,1,0,1,1,1,0,0,2,2,0,1,0,
      0,1,0,0,1,0,0,1,1,0,0,2,2,2,1,1,0,0,2,0,
      0,1,0,2,2,2,2,0,1,1,1,1,1,1,1,1,2,2,1,0,
      0,1,1,1,2,1,1,1,1,0,0,1,1,1,0,2,2,0,1,0,
      0,1,0,1,1,1,2,2,2,0,0,1,1,1,0,2,2,1,0,0,
      0,1,0,1,1,1,1,1,1,0,1,1,1,0,0,2,2,0,1,0,
      0,1,0,0,1,0,0,1,1,0,0,2,2,2,1,1,0,0,2,0,
      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    ];

    var score = 0;

    // create the html to render/display in the browser for the user to see
    function draw_world()
    {
      // using innerHTML to set (can also get!) the contents of the element with the ID of 'world'
      document.getElementById('world').innerHTML = "";
      // loop through the 'world' array to generate the html
      for(var i = 0; i < world.length; i++)
      {
        if(world[i] === 0)
        {
          // draw a brick
          document.getElementById('world').innerHTML = 
            document.getElementById('world').innerHTML +
            "<div class='brick' style='top:" + Math.floor(i/20) * 16 + "px; left:" + (i%20) * 16 + "px'></div>";
        }
        else if(world[i] === 1)
        {
          // draw a coin
          document.getElementById('world').innerHTML = 
            document.getElementById('world').innerHTML +
            "<div class='coin' style='top:" + Math.floor(i/20) * 16 + "px;left:" + (i%20) * 16 + "px'></div>";
        }
      }
    }

    // create the html to render pacman in the html
    function draw_pacman()
    {
      document.getElementById('world').innerHTML = document.getElementById('world').innerHTML + "<div class='pacman' style='top: " + pacman.y * 16 + "px; left: " + pacman.x * 16 + "px'></div>";
    }

    function draw_score(score)
    {
      console.log("Score is" + score);
      document.getElementById('score').innerHTML = "";
      document.getElementById('score').innerHTML = score + "<div class = 'score'></div>";
    }

    // call functions
    draw_world();
    draw_pacman();
    draw_score(score);

    document.onkeydown = function(e)
    {
      console.log(e.keyCode);
// determine if an arrow key was pressed

      if((e.keyCode == 37) && (world[((pacman.y*20) + (pacman.x-1))] != 0))
      {
        pacman.x = pacman.x - 1; 
      }
      else if((e.keyCode == 39) && (world[((pacman.y*20) + (pacman.x + 1))] != 0))
      {
        pacman.x = pacman.x + 1; 
      }
      else if((e.keyCode == 40) && (world[((pacman.y + 1) * 20) + (pacman.x)]) !=0)
      {
        pacman.y = pacman.y + 1;
      }
      else if((e.keyCode == 38) && (world[((pacman.y - 1) * 20) + (pacman.x)]) !=0)
      {
        pacman.y = pacman.y - 1;
      }
      
      if(world[((pacman.y * 20) + pacman.x)] == 1)
      {
         world[((pacman.y * 20) + pacman.x)] = 2;
         score = score + 10;
         document.getElementById('pacman_chomp').play();
      }
// call functions to update the view
      draw_world();
      draw_pacman();
      draw_score(score);
    }

  </script>
</body>
</html>











